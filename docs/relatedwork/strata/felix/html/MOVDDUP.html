<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" xmlns:x86="http://www.felixcloutier.com/x86"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="style.css"></link><title>MOVDDUP
		— Replicate Double FP Values</title></head><body><header><nav><ul><li><a href="./index.html">Index</a></li><li>May 2018</li></ul></nav></header><h1>MOVDDUP
		— Replicate Double FP Values</h1>

<table>
<tr>
<th>Opcode/Instruction</th>
<th>Op / En</th>
<th>64/32 bit Mode Support</th>
<th>CPUID Feature Flag</th>
<th>Description</th></tr>
<tr>
<td>F2 0F 12 /r MOVDDUP xmm1, xmm2/m64</td>
<td>A</td>
<td>V/V</td>
<td>SSE3</td>
<td>Move double-precision floating-point value from xmm2/m64 and duplicate into xmm1.</td></tr>
<tr>
<td>VEX.128.F2.0F.WIG 12 /r VMOVDDUP xmm1, xmm2/m64</td>
<td>A</td>
<td>V/V</td>
<td>AVX</td>
<td>Move double-precision floating-point value from xmm2/m64 and duplicate into xmm1.</td></tr>
<tr>
<td>VEX.256.F2.0F.WIG 12 /r VMOVDDUP ymm1, ymm2/m256</td>
<td>A</td>
<td>V/V</td>
<td>AVX</td>
<td>Move even index double-precision floating-point values from ymm2/mem and duplicate each element into ymm1.</td></tr>
<tr>
<td>EVEX.128.F2.0F.W1 12 /r VMOVDDUP xmm1 {k1}{z}, xmm2/m64</td>
<td>B</td>
<td>V/V</td>
<td>AVX512VL AVX512F</td>
<td>Move double-precision floating-point value from xmm2/m64 and duplicate each element into xmm1 subject to writemask k1.</td></tr>
<tr>
<td>EVEX.256.F2.0F.W1 12 /r VMOVDDUP ymm1 {k1}{z}, ymm2/m256</td>
<td>B</td>
<td>V/V</td>
<td>AVX512VL AVX512F</td>
<td>Move even index double-precision floating-point values from ymm2/m256 and duplicate each element into ymm1 subject to writemask k1.</td></tr>
<tr>
<td>EVEX.512.F2.0F.W1 12 /r VMOVDDUP zmm1 {k1}{z}, zmm2/m512</td>
<td>B</td>
<td>V/V</td>
<td>AVX512F</td>
<td>Move even index double-precision floating-point values from zmm2/m512 and duplicate each element into zmm1 subject to writemask k1.</td></tr></table>
<h2 id="instruction-operand-encoding">Instruction Operand Encoding<a class="anchor" href="#instruction-operand-encoding">
			¶
		</a></h2>
<table>
<tr>
<td>Op/En</td>
<td>Tuple Type</td>
<td>Operand 1</td>
<td>Operand 2</td>
<td>Operand 3</td>
<td>Operand 4</td></tr>
<tr>
<td>A</td>
<td>NA</td>
<td>ModRM:reg (w)</td>
<td>ModRM:r/m (r)</td>
<td>NA</td>
<td>NA</td></tr>
<tr>
<td>B</td>
<td>MOVDDUP</td>
<td>ModRM:reg (w)</td>
<td>ModRM:r/m (r)</td>
<td>NA</td>
<td>NA</td></tr></table>
<h3 id="description">Description<a class="anchor" href="#description">
			¶
		</a></h3>
<p>For 256-bit or higher versions: Duplicates even-indexed double-precision floating-point values from the source operand (the second operand) and into adjacent pair and store to the destination operand (the first operand).</p>
<p>For 128-bit versions: Duplicates the low double-precision floating-point value from the source operand (the second operand) and store to the destination operand (the first operand).</p>
<p>128-bit Legacy SSE version: Bits (MAXVL-1:128) of the corresponding destination register are unchanged. The source operand is XMM register or a 64-bit memory location.</p>
<p>VEX.128 and EVEX.128 encoded version: Bits (MAXVL-1:128) of the destination register are zeroed. The source operand is XMM register or a 64-bit memory location. The destination is updated conditionally under the writemask for EVEX version.</p>
<p>VEX.256 and EVEX.256 encoded version: Bits (MAXVL-1:256) of the destination register are zeroed. The source operand is YMM register or a 256-bit memory location. The destination is updated conditionally under the writemask for EVEX version.</p>
<p>EVEX.512 encoded version: The destination is updated according to the writemask. The source operand is ZMM register or a 512-bit memory location.</p>
<p>Note: VEX.vvvv and EVEX.vvvv are reserved and must be 1111b otherwise instructions will #UD.</p>
<figure id="fig-4-2">
<svg style="width: 475.848pt; height: 125.351976pt" viewBox="100.7 0.0 401.54 109.45998">
<g xmlns="http://www.w3.org/2000/svg" style="fill: none; stroke: none">
<rect height="103.5" x="103.2" style="fill: rgb(0%, 0%, 0%)" y="0.479979999999955" width="0.48"></rect>
<rect height="103.5" x="499.26" style="fill: rgb(0%, 0%, 0%)" y="0.479979999999955" width="0.47998"></rect>
<rect height="0.47998" x="103.2" style="fill: rgb(0%, 0%, 0%)" y="0.0" width="396.54"></rect>
<rect height="0.47998" x="103.2" style="fill: rgb(0%, 0%, 0%)" y="103.98" width="396.54"></rect>
<rect height="0.47998" x="163.08" style="fill: rgb(0%, 0%, 0%)" y="82.5" width="74.52"></rect>
<rect height="13.74" x="237.12" style="fill: rgb(0%, 0%, 0%)" y="82.7399799999999" width="0.48"></rect>
<rect height="0.47998" x="162.84" style="fill: rgb(0%, 0%, 0%)" y="96.0" width="74.52"></rect>
<rect height="13.74" x="162.84" style="fill: rgb(0%, 0%, 0%)" y="82.4999799999999" width="0.48"></rect>
<rect height="13.5" x="237.36" style="fill: rgb(100%, 100%, 100%)" y="82.7399799999999" width="74.22"></rect>
<rect height="0.47998" x="237.36" style="fill: rgb(0%, 0%, 0%)" y="82.5" width="74.46"></rect>
<rect height="13.74" x="311.34" style="fill: rgb(0%, 0%, 0%)" y="82.7399799999999" width="0.48001"></rect>
<rect height="0.47998" x="237.12" style="fill: rgb(0%, 0%, 0%)" y="96.0" width="74.46"></rect>
<rect height="13.74" x="237.12" style="fill: rgb(0%, 0%, 0%)" y="82.4999799999999" width="0.48"></rect>
<rect height="13.5" x="311.58" style="fill: rgb(100%, 100%, 100%)" y="82.7399799999999" width="74.28"></rect>
<rect height="0.47998" x="311.58" style="fill: rgb(0%, 0%, 0%)" y="82.5" width="74.52"></rect>
<rect height="13.74" x="385.62" style="fill: rgb(0%, 0%, 0%)" y="82.7399799999999" width="0.48001"></rect>
<rect height="0.47998" x="311.34" style="fill: rgb(0%, 0%, 0%)" y="96.0" width="74.52"></rect>
<rect height="13.74" x="311.34" style="fill: rgb(0%, 0%, 0%)" y="82.4999799999999" width="0.48001"></rect>
<rect height="13.5" x="385.86" style="fill: rgb(100%, 100%, 100%)" y="82.7399799999999" width="74.22"></rect>
<rect height="0.47998" x="385.86" style="fill: rgb(0%, 0%, 0%)" y="82.5" width="74.46"></rect>
<rect height="13.74" x="459.84" style="fill: rgb(0%, 0%, 0%)" y="82.7399799999999" width="0.48001"></rect>
<rect height="0.47998" x="385.62" style="fill: rgb(0%, 0%, 0%)" y="96.0" width="74.46"></rect>
<rect height="13.74" x="385.62" style="fill: rgb(0%, 0%, 0%)" y="82.4999799999999" width="0.48001"></rect>
<rect height="13.5" x="163.08" style="fill: rgb(100%, 100%, 100%)" y="15.2399799999999" width="74.28"></rect>
<rect height="0.47998" x="163.08" style="fill: rgb(0%, 0%, 0%)" y="15.0" width="74.52"></rect>
<rect height="13.74" x="237.12" style="fill: rgb(0%, 0%, 0%)" y="15.2399799999999" width="0.48"></rect>
<rect height="0.47998" x="162.84" style="fill: rgb(0%, 0%, 0%)" y="28.5" width="74.52"></rect>
<rect height="13.74" x="162.84" style="fill: rgb(0%, 0%, 0%)" y="14.9999799999999" width="0.48"></rect>
<rect height="13.5" x="237.36" style="fill: rgb(100%, 100%, 100%)" y="15.2399799999999" width="74.22"></rect>
<rect height="0.47998" x="237.36" style="fill: rgb(0%, 0%, 0%)" y="15.0" width="74.46"></rect>
<rect height="13.74" x="311.34" style="fill: rgb(0%, 0%, 0%)" y="15.2399799999999" width="0.48001"></rect>
<rect height="0.47998" x="237.12" style="fill: rgb(0%, 0%, 0%)" y="28.5" width="74.46"></rect>
<rect height="13.74" x="237.12" style="fill: rgb(0%, 0%, 0%)" y="14.9999799999999" width="0.48"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 352.08 66.4199799999999 L 352.32 66.4199799999999 L 352.5 66.35998 C 353.305 66.0189799999999 353.321 64.7639799999999 352.32 64.4399799999999L 351.9 64.4399799999999 C 350.905 64.6409799999999 350.803 66.0769799999999 351.72 66.35998L 351.9 66.4199799999999 L 352.08 66.4199799999999"></path>
<path style="fill-rule: nonzero; fill: rgb(0%, 0%, 0%)" d="M 352.08 65.45998 L 357.06 65.45998 L 356.88 66.1199799999999 L 352.56 81.1199799999999 L 352.08 82.79998 L 351.6 81.1199799999999 L 347.34 66.1199799999999 L 347.16 65.45998 L 347.82 65.45998 L 348.3 65.81998 L 352.56 80.81998 L 351.6 81.1199799999999 L 351.6 80.81998 L 355.92 65.81998 L 356.88 66.1199799999999 L 356.4 66.47998 L 352.08 66.47998"></path>
<rect height="1.02" x="347.82" style="fill: rgb(0%, 0%, 0%)" y="65.45998" width="4.26"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 352.08 65.9399799999999 L 356.4 65.9399799999999 L 352.08 80.9399799999999 L 347.82 65.9399799999999"></path>
<rect height="9.72" x="351.12" style="fill: rgb(0%, 0%, 0%)" y="55.7399799999999" width="1.98"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 277.86 66.4199799999999 L 278.04 66.4199799999999 L 278.22 66.35998 C 279.128 65.9959799999999 278.976 64.6789799999999 278.04 64.4399799999999L 277.62 64.4399799999999 C 276.684 64.6789799999999 276.532 65.9959799999999 277.44 66.35998L 277.62 66.4199799999999 L 277.86 66.4199799999999"></path>
<path style="fill-rule: nonzero; fill: rgb(0%, 0%, 0%)" d="M 277.86 65.45998 L 282.78 65.45998 L 282.6 66.1199799999999 L 278.34 81.1199799999999 L 277.86 82.79998 L 277.38 81.1199799999999 L 273.06 66.1199799999999 L 272.88 65.45998 L 273.54 65.45998 L 274.02 65.81998 L 278.34 80.81998 L 277.38 81.1199799999999 L 277.38 80.81998 L 281.64 65.81998 L 282.6 66.1199799999999 L 282.12 66.47998 L 277.86 66.47998"></path>
<rect height="1.02" x="273.54" style="fill: rgb(0%, 0%, 0%)" y="65.45998" width="4.32"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 277.86 65.9399799999999 L 282.12 65.9399799999999 L 277.86 80.9399799999999 L 273.54 65.9399799999999"></path>
<rect height="36.72" x="276.9" style="fill: rgb(0%, 0%, 0%)" y="28.7399799999999" width="1.98"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 203.58 66.4199799999999 L 203.76 66.4199799999999 L 204.0 66.35998 C 204.862 65.9709799999999 204.719 64.6269799999999 203.76 64.4399799999999L 203.4 64.4399799999999 C 202.405 64.6409799999999 202.303 66.0769799999999 203.22 66.35998L 203.4 66.4199799999999 L 203.58 66.4199799999999"></path>
<path style="fill-rule: nonzero; fill: rgb(0%, 0%, 0%)" d="M 203.58 65.45998 L 208.56 65.45998 L 208.38 66.1199799999999 L 204.06 81.1199799999999 L 203.58 82.79998 L 203.1 81.1199799999999 L 198.78 66.1199799999999 L 198.6 65.45998 L 199.26 65.45998 L 199.74 65.81998 L 204.06 80.81998 L 203.1 81.1199799999999 L 203.1 80.81998 L 207.42 65.81998 L 208.38 66.1199799999999 L 207.9 66.47998 L 203.58 66.47998"></path>
<rect height="1.02" x="199.26" style="fill: rgb(0%, 0%, 0%)" y="65.45998" width="4.32"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 203.58 65.9399799999999 L 207.9 65.9399799999999 L 203.58 80.9399799999999 L 199.26 65.9399799999999"></path>
<rect height="9.72" x="202.62" style="fill: rgb(0%, 0%, 0%)" y="55.7399799999999" width="1.98"></rect>
<rect height="13.5" x="311.58" style="fill: rgb(100%, 100%, 100%)" y="15.2399799999999" width="74.28"></rect>
<rect height="0.47998" x="311.58" style="fill: rgb(0%, 0%, 0%)" y="15.0" width="74.52"></rect>
<rect height="13.74" x="385.62" style="fill: rgb(0%, 0%, 0%)" y="15.2399799999999" width="0.48001"></rect>
<rect height="0.47998" x="311.34" style="fill: rgb(0%, 0%, 0%)" y="28.5" width="74.52"></rect>
<rect height="13.74" x="311.34" style="fill: rgb(0%, 0%, 0%)" y="14.9999799999999" width="0.48001"></rect>
<rect height="13.5" x="385.86" style="fill: rgb(100%, 100%, 100%)" y="15.2399799999999" width="74.22"></rect>
<rect height="0.47998" x="385.86" style="fill: rgb(0%, 0%, 0%)" y="15.0" width="74.46"></rect>
<rect height="13.74" x="459.84" style="fill: rgb(0%, 0%, 0%)" y="15.2399799999999" width="0.48001"></rect>
<rect height="0.47998" x="385.62" style="fill: rgb(0%, 0%, 0%)" y="28.5" width="74.46"></rect>
<rect height="13.74" x="385.62" style="fill: rgb(0%, 0%, 0%)" y="14.9999799999999" width="0.48001"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 426.36 66.4199799999999 L 426.54 66.4199799999999 L 426.72 66.35998 C 427.643 66.0589799999999 427.47 64.6089799999999 426.54 64.4399799999999L 426.12 64.4399799999999 C 425.184 64.6789799999999 425.032 65.9959799999999 425.94 66.35998L 426.12 66.4199799999999 L 426.36 66.4199799999999"></path>
<path style="fill-rule: nonzero; fill: rgb(0%, 0%, 0%)" d="M 426.36 65.45998 L 431.28 65.45998 L 431.1 66.1199799999999 L 426.84 81.1199799999999 L 426.36 82.79998 L 425.88 81.1199799999999 L 421.56 66.1199799999999 L 421.38 65.45998 L 422.04 65.45998 L 422.52 65.81998 L 426.84 80.81998 L 425.88 81.1199799999999 L 425.88 80.81998 L 430.14 65.81998 L 431.1 66.1199799999999 L 430.62 66.47998 L 426.36 66.47998"></path>
<rect height="1.02" x="422.04" style="fill: rgb(0%, 0%, 0%)" y="65.45998" width="4.32"></rect>
<path style="fill-rule: evenodd; fill: rgb(0%, 0%, 0%)" d="M 426.36 65.9399799999999 L 430.62 65.9399799999999 L 426.36 80.9399799999999 L 422.04 65.9399799999999"></path>
<rect height="36.72" x="425.4" style="fill: rgb(0%, 0%, 0%)" y="28.7399799999999" width="1.98"></rect>
<rect height="1.98" x="203.58" style="fill: rgb(0%, 0%, 0%)" y="54.7799799999999" width="74.28"></rect>
<rect height="1.98" x="352.08" style="fill: rgb(0%, 0%, 0%)" y="54.7799799999999" width="74.28"></rect>
<text x="198.9" textLength="9.17216670000002" y="25.3508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X3</text>
<text x="273.18" textLength="9.17216669999999" y="25.3508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X2</text>
<text x="347.4" textLength="9.17216669999999" y="25.3508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X1</text>
<text x="421.68" textLength="9.23248509999996" y="25.3508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X0</text>
<text x="143.10035448" textLength="15.8825887" y="26.97118082" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">SRC</text>
<text x="142.86121192" textLength="19.96388244" y="92.8508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">DEST</text>
<text x="197.82" textLength="9.17216670000002" y="92.8508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X2</text>
<text x="272.04" textLength="9.23248509999996" y="92.8508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X2</text>
<text x="347.4" textLength="9.17216669999999" y="92.8508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X0</text>
<text x="421.68" textLength="9.23248509999996" y="92.8508777999999" lengthAdjust="spacingAndGlyphs" style="font-size: 8.41441680000003pt; fill: #000">X0</text></g></svg>
<figcaption><a href="./MOVDDUP.html#fig-4-2">Figure 4-2</a>. VMOVDDUP Operation</figcaption></figure>
<h3 id="operation">Operation<a class="anchor" href="#operation">
			¶
		</a></h3>
<h4 id="vmovddup--evex-encoded-versions-">VMOVDDUP (EVEX encoded versions)<a class="anchor" href="#vmovddup--evex-encoded-versions-">
			¶
		</a></h4>
<pre>(KL, VL) = (2, 128), (4, 256), (8, 512)
TMP_SRC[63:0] ← SRC[63:0]
TMP_SRC[127:64] ← SRC[63:0]
IF VL &gt;= 256
    TMP_SRC[191:128] ← SRC[191:128]
    TMP_SRC[255:192] ← SRC[191:128]
FI;
IF VL &gt;= 512
    TMP_SRC[319:256] ← SRC[319:256]
    TMP_SRC[383:320] ← SRC[319:256]
    TMP_SRC[477:384] ← SRC[477:384]
    TMP_SRC[511:484] ← SRC[477:384]
FI;
FOR j←0 TO KL-1
    i←j * 64
    IF k1[j] OR *no writemask*
        THEN DEST[i+63:i]←TMP_SRC[i+63:i]
        ELSE
            IF *merging-masking*
                THEN *DEST[i+63:i] remains unchanged*
                ELSE
                        ; zeroing-masking
                    DEST[i+63:i]←0
                        ; zeroing-masking
            FI
    FI;
ENDFOR
DEST[MAXVL-1:VL] ← 0
</pre>
<h4 id="vmovddup--vex-256-encoded-version-">VMOVDDUP (VEX.256 encoded version)<a class="anchor" href="#vmovddup--vex-256-encoded-version-">
			¶
		</a></h4>
<pre>DEST[63:0] ←SRC[63:0]
DEST[127:64] ←SRC[63:0]
DEST[191:128] ←SRC[191:128]
DEST[255:192] ←SRC[191:128]
DEST[MAXVL-1:256] ←0
</pre>
<h4 id="vmovddup--vex-128-encoded-version-">VMOVDDUP (VEX.128 encoded version)<a class="anchor" href="#vmovddup--vex-128-encoded-version-">
			¶
		</a></h4>
<pre>DEST[63:0] ←SRC[63:0]
DEST[127:64] ←SRC[63:0]
DEST[MAXVL-1:128] ←0
</pre>
<h4 id="movddup--128-bit-legacy-sse-version-">MOVDDUP (128-bit Legacy SSE version)<a class="anchor" href="#movddup--128-bit-legacy-sse-version-">
			¶
		</a></h4>
<pre>DEST[63:0] ←SRC[63:0]
DEST[127:64] ←SRC[63:0]
DEST[MAXVL-1:128] (Unmodified)
</pre>
<h3 id="intel-c-c++-compiler-intrinsic-equivalent">Intel C/C++ Compiler Intrinsic Equivalent<a class="anchor" href="#intel-c-c++-compiler-intrinsic-equivalent">
			¶
		</a></h3>
<pre>VMOVDDUP __m512d _mm512_movedup_pd( __m512d a);
</pre>
<pre>VMOVDDUP __m512d _mm512_mask_movedup_pd(__m512d s, __mmask8 k, __m512d a);
</pre>
<pre>VMOVDDUP __m512d _mm512_maskz_movedup_pd( __mmask8 k, __m512d a);
</pre>
<pre>VMOVDDUP __m256d _mm256_mask_movedup_pd(__m256d s, __mmask8 k, __m256d a);
</pre>
<pre>VMOVDDUP __m256d _mm256_maskz_movedup_pd( __mmask8 k, __m256d a);
</pre>
<pre>VMOVDDUP __m128d _mm_mask_movedup_pd(__m128d s, __mmask8 k, __m128d a);
</pre>
<pre>VMOVDDUP __m128d _mm_maskz_movedup_pd( __mmask8 k, __m128d a);
</pre>
<pre>MOVDDUP __m256d _mm256_movedup_pd (__m256d a);
</pre>
<pre>MOVDDUP __m128d _mm_movedup_pd (__m128d a);
</pre>
<h3 class="exceptions" id="simd-floating-point-exceptions">SIMD Floating-Point Exceptions<a class="anchor" href="#simd-floating-point-exceptions">
			¶
		</a></h3>
<p>None</p>
<h3 class="exceptions" id="other-exceptions">Other Exceptions<a class="anchor" href="#other-exceptions">
			¶
		</a></h3>
<p>Non-EVEX-encoded instruction, see Exceptions Type 5;</p>
<p>EVEX-encoded instruction, see Exceptions Type E5NF.</p>
<table>
<tr>
<td>#UD</td>
<td>If EVEX.vvvv != 1111B or VEX.vvvv != 1111B.</td></tr></table><footer><p>
		This UNOFFICIAL, mechanically-separated, non-verified reference is provided for convenience, but it may be
		inc<span style="opacity: 0.2">omp</span>lete or b<sub>r</sub>oke<sub>n</sub> in various obvious or non-obvious
		ways. Refer to <a href="https://software.intel.com/sites/default/files/managed/39/c5/325462-sdm-vol-1-2abcd-3abcd.pdf">Intel® 64 and IA-32 Architectures Software Developer’s Manual</a> for anything serious.
	</p></footer></body></html>
